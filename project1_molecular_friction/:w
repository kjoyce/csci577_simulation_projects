from Container import Container
from Force import SledForces
from Integrator import VerletIntegrator
from DistanceMatrix import DistanceMatrix
from numpy import linspace,sqrt,mod,inf,sin,pi
from pylab import rand,randint
from Container import Container
class ParticleInitialize(object):
  def __init__(self,case):
    dims = 2
    dt = .01
    self.distance_matrix = DistanceMatrix()
    self.force		 = SledForces(dims,self.distance_matrix)
    self.integrate	 = VerletIntegrator(dt,self.force)
    self.c		 = Container(self.integrate)
    c = self.c
    initialization = case
    xlim = (0,18)
    ylim = (-1,5)
    n_floor = 100
    n_sled = 13
    pot_energy_lim = (-10,30)
    kin_energy_lim = (40,70)
    tot_energy_lim = (40,70)
    pressure_lim = (40,70)
    
    radius = 2**(1./6.)
    diameter =  2.*r
    dy = r*sqrt(3)/2.
    dx = r
    for i in range(n_floor):
      c.addParticle(float(i)*dx,0.,0.,0.,1.)

    for i in range(n_sled):
      x = dx/2. + i*dx
      y = dy*(i%2) +
      c.addParticle(x,y,0.,0.,1.)
      print "{}, {}".format((i-99)*dx,dy*i%2 + dx)

    self.xlim            = xlim
    self.ylim            = ylim
    self.pot_energy_lim  = pot_energy_lim
    self.kin_energy_lim  = kin_energy_lim
    self.tot_energy_lim  = tot_energy_lim
    self.pressure_lim    = pressure_lim
  def __call__(self):
    return self.c,self.distance_matrix,self.force,self.integrate,self.xlim,self.ylim,self.pot_energy_lim,self.kin_energy_lim,self.tot_energy_lim,self.pressure_lim


